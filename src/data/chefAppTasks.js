// ============================================================
// MICO'S CHEF APP — TASK PLAN
// 64 tasks across 8 epics (E20–E27)
// These are tracked in the Workspace app but built as a
// separate customer-facing PWA at micos.shop
// ============================================================

export const chefAppTasks = [

  // ============================================================
  // EPIC 20: Chef App — Authentication & Onboarding
  // ============================================================

  // ── Feature: Project Scaffold & Setup ──
  {
    id: 2000000001,
    title: "Create GitHub repo micos-chef-app",
    status: "not-started",
    priority: "high",
    owner: "trey",
    size: "S",
    sprintId: null,
    dueDate: null,
    notes: "Go to github.com/new. Name: micos-chef-app. Private repo. Do NOT initialize with README or .gitignore — we need an empty repo. After creation, copy the repo URL for later use in git remote add origin.",
    tags: ["chef-app"],
    urgency: "this-week",
  },
  {
    id: 2000000002,
    title: "Scaffold Vite + React + Tailwind project",
    status: "not-started",
    priority: "high",
    owner: "trey",
    size: "M",
    sprintId: null,
    dueDate: null,
    notes: "Open new VS Code window. mkdir ~/projects/micos-chef-app && cd into it. Run: npm create vite@latest . -- --template react. Install deps: npm install. Install Tailwind: npm install -D tailwindcss @tailwindcss/vite. Configure tailwind in vite.config.js and index.css. Verify dev server runs with npm run dev. This is the foundation — same stack as the internal workspace app.",
    tags: ["chef-app"],
    urgency: "this-week",
  },
  {
    id: 2000000003,
    title: "Install and configure Firebase SDK",
    status: "not-started",
    priority: "high",
    owner: "trey",
    size: "S",
    sprintId: null,
    dueDate: null,
    notes: "npm install firebase. Create src/firebase.js with config from the existing mico-s-micro-farm-agile Firebase project. Use the same env vars as the internal app. Create .env file with VITE_FIREBASE_API_KEY, VITE_FIREBASE_AUTH_DOMAIN, VITE_FIREBASE_PROJECT_ID=mico-s-micro-farm-agile, etc. Initialize auth and firestore exports.",
    tags: ["chef-app"],
    urgency: "this-week",
  },
  {
    id: 2000000004,
    title: "Configure Shopify Storefront API client",
    status: "not-started",
    priority: "high",
    owner: "trey",
    size: "S",
    sprintId: null,
    dueDate: null,
    notes: "Create src/shopify.js. Configure with VITE_SHOPIFY_STORE_DOMAIN=micos-micro-farm.myshopify.com and VITE_SHOPIFY_STOREFRONT_CLIENT_ID=9ab66e607ba31f735a4436555b0f593e. Add these to .env file. Create a reusable shopifyFetch() function that makes GraphQL POST requests to https://{storeDomain}/api/2026-01/graphql.json with the Storefront API headers. This is the single function all Shopify calls will go through.",
    tags: ["chef-app"],
    urgency: "this-week",
  },
  {
    id: 2000000005,
    title: "Install React Router v6 and set up routing",
    status: "not-started",
    priority: "high",
    owner: "trey",
    size: "S",
    sprintId: null,
    dueDate: null,
    notes: "npm install react-router-dom. Set up BrowserRouter in main.jsx. Create App.jsx with routes: / (Home), /catalog (Catalog), /cart (Cart), /orders (Orders), /orders/:id (OrderDetail), /account (Account), /login (Login). Wrap authenticated routes in an AuthGuard component that redirects to /login if not signed in.",
    tags: ["chef-app"],
    urgency: "this-week",
  },
  {
    id: 2000000006,
    title: "Set up project folder structure",
    status: "not-started",
    priority: "high",
    owner: "trey",
    size: "S",
    sprintId: null,
    dueDate: null,
    notes: "Create folder structure: src/components/ (all page components), src/services/ (shopifyService.js, orderService.js, customerService.js), src/hooks/ (useAuth.js, useProducts.js, useOrders.js, useCart.js, useCustomer.js), src/utils/ (formatters.js). Create placeholder files for each. This structure mirrors the internal app pattern and keeps concerns separated.",
    tags: ["chef-app"],
    urgency: "this-week",
  },
  {
    id: 2000000007,
    title: "Deploy to Vercel (initial empty deploy)",
    status: "not-started",
    priority: "high",
    owner: "trey",
    size: "S",
    sprintId: null,
    dueDate: null,
    notes: "Push initial scaffold to GitHub repo. Go to vercel.com, create new project, import micos-chef-app repo. Framework preset: Vite. Add all environment variables from .env to Vercel project settings. Deploy. Verify the default Vite page loads at the Vercel URL. Later we will point micos.shop domain to this Vercel project.",
    tags: ["chef-app"],
    urgency: "this-week",
  },
  {
    id: 2000000008,
    title: "Point micos.shop domain to Vercel",
    status: "not-started",
    priority: "medium",
    owner: "trey",
    size: "S",
    sprintId: null,
    dueDate: null,
    notes: "In Vercel project settings → Domains → Add micos.shop. Vercel will give you DNS records (CNAME or A record). Go to your domain registrar where micos.shop is registered and update DNS to point to Vercel. May take up to 48 hours to propagate. Vercel auto-provisions SSL certificate.",
    tags: ["chef-app"],
    urgency: "this-week",
  },

  // ── Feature: Authentication System ──
  {
    id: 2000000009,
    title: "Build useAuth hook with Firebase Auth",
    status: "not-started",
    priority: "high",
    owner: "trey",
    size: "M",
    sprintId: null,
    dueDate: null,
    notes: "Create src/hooks/useAuth.js. Use Firebase Auth with onAuthStateChanged listener. Support email/password sign-in, Google sign-in, and sign-out. Store current user in React context (AuthContext). Export useAuth() hook that returns { user, loading, signIn, signInWithGoogle, signOut, error }. The AuthContext provider wraps the entire app in App.jsx. Chef accounts will be pre-created by admin.",
    tags: ["chef-app"],
    urgency: "this-week",
  },
  {
    id: 2000000010,
    title: "Build LoginScreen component",
    status: "not-started",
    priority: "high",
    owner: "trey",
    size: "M",
    sprintId: null,
    dueDate: null,
    notes: "Create src/components/LoginScreen.jsx. Dark background with Mico's branding (logo, farm green accent color). Email + password fields with large touch targets (min 48x48px). 'Sign in with Google' button. 'Remember me' toggle defaulted ON. Error messages displayed inline. No signup — admin creates chef accounts. On successful login, redirect to Home. Mobile-first: fields stack vertically, full-width buttons, min font size 16px to prevent iOS zoom.",
    tags: ["chef-app"],
    urgency: "this-week",
  },
  {
    id: 2000000011,
    title: "Build AuthGuard wrapper component",
    status: "not-started",
    priority: "high",
    owner: "trey",
    size: "S",
    sprintId: null,
    dueDate: null,
    notes: "Create AuthGuard component that wraps protected routes. Checks useAuth() for user. If loading, show loading spinner. If no user, redirect to /login. If user exists, render children. Used in App.jsx to wrap all routes except /login. Simple component, under 30 lines.",
    tags: ["chef-app"],
    urgency: "this-week",
  },
  {
    id: 2000000012,
    title: "Map Firebase UID to Firestore customer doc",
    status: "not-started",
    priority: "high",
    owner: "trey",
    size: "M",
    sprintId: null,
    dueDate: null,
    notes: "When a chef logs in, their Firebase UID needs to map to their customer document in Firestore at farms/{farmId}/customers/{customerId}. Two approaches: (1) use Firebase UID as the customerId directly, or (2) store a mapping doc. Option 1 is simpler — when admin creates a chef account in Firebase Auth, they also create the customer doc with that same UID as the doc ID. The useCustomer hook will fetch farms/{farmId}/customers/{user.uid} on login.",
    tags: ["chef-app"],
    urgency: "this-week",
  },

  // ── Feature: App Shell & Navigation ──
  {
    id: 2000000013,
    title: "Build Layout component with bottom tab bar",
    status: "not-started",
    priority: "high",
    owner: "trey",
    size: "M",
    sprintId: null,
    dueDate: null,
    notes: "Create src/components/Layout.jsx. Fixed bottom tab bar with 4 tabs: Home (house icon), Catalog (grid icon), Orders (list icon), Account (person icon). Active tab highlighted with Mico's green. Cart icon with badge count in top-right header (always visible, tapping goes to /cart). Mico's logo small in top-left header. Dark mode by default: bg-gray-950 background, white text. Tab bar height ~64px with 48x48px touch targets. Bottom safe area padding for iPhone notch phones (env(safe-area-inset-bottom)).",
    tags: ["chef-app"],
    urgency: "this-week",
  },
  {
    id: 2000000014,
    title: "Set up PWA manifest.json",
    status: "not-started",
    priority: "high",
    owner: "trey",
    size: "S",
    sprintId: null,
    dueDate: null,
    notes: "Create public/manifest.json with: name 'Mico's Micro Farm', short_name 'Mico's', start_url '/', display 'standalone', background_color '#030712' (gray-950), theme_color '#16a34a' (green-600), orientation 'portrait'. Add icon references for 192x192 and 512x512 PNG. Link manifest in index.html <head>. Add apple-touch-icon meta tag. This makes the app installable via 'Add to Home Screen' on both iOS and Android.",
    tags: ["chef-app"],
    urgency: "this-week",
  },
  {
    id: 2000000015,
    title: "Create service worker shell",
    status: "not-started",
    priority: "medium",
    owner: "trey",
    size: "S",
    sprintId: null,
    dueDate: null,
    notes: "Create public/sw.js with basic cache-first strategy for static assets and network-first for API calls. Register service worker in main.jsx. For now, a minimal service worker that caches the app shell so it loads fast on repeat visits. Full offline support comes later in Polish phase. Use Workbox or write a simple vanilla SW.",
    tags: ["chef-app"],
    urgency: "this-week",
  },
  {
    id: 2000000016,
    title: "Create app icon set (192px and 512px)",
    status: "not-started",
    priority: "medium",
    owner: "trey",
    size: "S",
    sprintId: null,
    dueDate: null,
    notes: "Create or export Mico's Micro Farm logo as PNG at 192x192 and 512x512 pixels. Save as public/icon-192.png and public/icon-512.png. These are used by the PWA manifest for the home screen icon and splash screen. Use a solid green background with white Mico's logo for good visibility. Also create a favicon.ico for browser tabs.",
    tags: ["chef-app"],
    urgency: "this-month",
  },

  // ============================================================
  // EPIC 21: Chef App — Product Catalog & Browsing
  // ============================================================

  // ── Feature: Product Data Service ──
  {
    id: 2000000017,
    title: "Build shopifyService.js — fetch all products",
    status: "not-started",
    priority: "high",
    owner: "trey",
    size: "M",
    sprintId: null,
    dueDate: null,
    notes: "Create src/services/shopifyService.js. Build fetchProducts() function that calls Shopify Storefront API via GraphQL. Query: products(first: 100) { edges { node { id, title, handle, description, productType, tags, variants(first: 10) { edges { node { id, title, price { amount, currencyCode }, availableForSale, weight, weightUnit } } }, images(first: 1) { edges { node { url, altText } } } } } }. Use the shopifyFetch() helper from shopify.js. Return cleaned/flattened product array.",
    tags: ["chef-app"],
    urgency: "this-week",
  },
  {
    id: 2000000018,
    title: "Build shopifyService.js — fetch product by handle",
    status: "not-started",
    priority: "medium",
    owner: "trey",
    size: "S",
    sprintId: null,
    dueDate: null,
    notes: "Add fetchProductByHandle(handle) to shopifyService.js. GraphQL query: productByHandle(handle: $handle) with same fields as fetchProducts. Used when deep-linking to a specific product or showing product detail in the order popup. Returns a single cleaned product object.",
    tags: ["chef-app"],
    urgency: "this-week",
  },
  {
    id: 2000000019,
    title: "Build useProducts hook",
    status: "not-started",
    priority: "high",
    owner: "trey",
    size: "S",
    sprintId: null,
    dueDate: null,
    notes: "Create src/hooks/useProducts.js. Calls shopifyService.fetchProducts() on mount. Returns { products, loading, error, refetch }. Caches products in state so re-renders don't re-fetch. Groups products by productType (Microgreens, Leafy Greens, Herbs) for category tabs. Only returns products where at least one variant has availableForSale === true.",
    tags: ["chef-app"],
    urgency: "this-week",
  },

  // ── Feature: Catalog UI ──
  {
    id: 2000000020,
    title: "Build Catalog page — category tabs",
    status: "not-started",
    priority: "high",
    owner: "trey",
    size: "M",
    sprintId: null,
    dueDate: null,
    notes: "Create src/components/Catalog.jsx. Horizontal scrollable category tabs at top: All, Microgreens, Leafy Greens, Herbs (derived from productType). Tapping a tab filters the product grid. Active tab has Mico's green underline. Tabs use large touch targets (min 44px height). Dark background, white text. Tabs are sticky at top of scroll area so they remain visible while browsing products below.",
    tags: ["chef-app"],
    urgency: "this-week",
  },
  {
    id: 2000000021,
    title: "Build Catalog page — two-column product grid",
    status: "not-started",
    priority: "high",
    owner: "trey",
    size: "L",
    sprintId: null,
    dueDate: null,
    notes: "Inside Catalog.jsx, render products in a 2-column CSS grid (grid-cols-2). Each product card shows: product image (or placeholder), product name, size info (e.g. '8oz clamshell'), price. Cards have rounded corners, subtle border, dark card background (gray-900). On tap, card opens the product detail/quantity popup (see next task). 4 items visible at a time on phone screen (2 columns x 2 rows). Gap between cards ~12px. This is the core UX — must feel fast and tappable.",
    tags: ["chef-app"],
    urgency: "this-week",
  },
  {
    id: 2000000022,
    title: "Build product detail popup with quantity selector",
    status: "not-started",
    priority: "high",
    owner: "trey",
    size: "L",
    sprintId: null,
    dueDate: null,
    notes: "When a product card is tapped, show a bottom sheet / modal popup. Contents: product name at top, variant selector if multiple sizes (e.g. '4oz' and '8oz' as toggle buttons), quantity stepper with - and + buttons (large 48x48px touch targets), current quantity displayed between buttons, calculated price below (qty x unit price), 'Add to Order' button (full width, Mico's green, 48px height), 'Cancel' text link. Popup slides up from bottom (mobile pattern). Tapping outside or Cancel closes it. Dark background with slightly lighter popup (gray-800).",
    tags: ["chef-app"],
    urgency: "this-week",
  },
  {
    id: 2000000023,
    title: "Add search/filter bar to Catalog",
    status: "not-started",
    priority: "low",
    owner: "trey",
    size: "S",
    sprintId: null,
    dueDate: null,
    notes: "Optional search bar above the product grid. Simple text input that filters products by name as you type. With only ~30 products this is nice-to-have, not critical. If implemented, use a debounced filter (300ms) on the product name. Magnifying glass icon inside the input. Clear button (X) when text is entered. Dark input styling matching the theme.",
    tags: ["chef-app"],
    urgency: "future",
  },

  // ============================================================
  // EPIC 22: Chef App — Cart & Ordering
  // ============================================================

  // ── Feature: Cart Management ──
  {
    id: 2000000024,
    title: "Build useCart hook with localStorage persistence",
    status: "not-started",
    priority: "high",
    owner: "trey",
    size: "M",
    sprintId: null,
    dueDate: null,
    notes: "Create src/hooks/useCart.js. Cart state stored in localStorage (not Firestore — only writes to Shopify on checkout). Returns { items, addItem, removeItem, updateQuantity, clearCart, itemCount, total }. Each cart item: { productId, variantId, title, variantTitle, price, quantity, imageUrl }. On addItem: if item+variant already in cart, increment quantity. On updateQuantity(variantId, qty): if qty === 0, remove item. Cart persists across page refreshes and app closes via localStorage. Use a CartContext provider so any component can access cart.",
    tags: ["chef-app"],
    urgency: "this-week",
  },
  {
    id: 2000000025,
    title: "Build Cart page — item list with quantity adjusters",
    status: "not-started",
    priority: "high",
    owner: "trey",
    size: "M",
    sprintId: null,
    dueDate: null,
    notes: "Create src/components/Cart.jsx. Shows list of cart items with: product name, variant (4oz/8oz), quantity stepper (- / qty / +), line total (qty x price), swipe-to-delete or trash icon. Empty cart state: 'Your cart is empty' with link to Catalog. At bottom: order total, 'Clear Cart' secondary button. All touch targets 48x48px minimum. Dark theme consistent with rest of app.",
    tags: ["chef-app"],
    urgency: "this-week",
  },

  // ── Feature: Checkout Flow ──
  {
    id: 2000000026,
    title: "Build delivery date picker",
    status: "not-started",
    priority: "high",
    owner: "trey",
    size: "M",
    sprintId: null,
    dueDate: null,
    notes: "On the Cart page, add a delivery date selector. Read available delivery days from Firestore farms/{farmId}/config.deliveryDays (e.g. ['Tuesday', 'Friday']). Show only the next 3-4 available delivery dates as tappable chips/buttons (not a full calendar). If current time is past cutoff time (from config.cutoffTime), the next delivery date is excluded — show clear message: 'Ordering for [date]'. Prominent display so chef always knows when they're getting their order.",
    tags: ["chef-app"],
    urgency: "this-week",
  },
  {
    id: 2000000027,
    title: "Add special instructions text field to Cart",
    status: "not-started",
    priority: "medium",
    owner: "trey",
    size: "S",
    sprintId: null,
    dueDate: null,
    notes: "Below the delivery date picker, add an expandable 'Special Instructions' text area. Collapsed by default (just a 'Add notes' link). When tapped, expands to a text area (max 500 chars). Placeholder: 'Any special requests for this order?' This maps to the specialInstructions field on the order document. Dark input styling, 16px min font to prevent iOS zoom.",
    tags: ["chef-app"],
    urgency: "this-month",
  },
  {
    id: 2000000028,
    title: "Build shopifyService.js — create checkout",
    status: "not-started",
    priority: "high",
    owner: "trey",
    size: "L",
    sprintId: null,
    dueDate: null,
    notes: "Add createCheckout(cartItems) to shopifyService.js. Uses Shopify Storefront API cartCreate mutation. Maps cart items to line items with variantId and quantity. Returns the checkout URL (cart.checkoutUrl). The chef will be redirected to this Shopify-hosted checkout page to complete payment. Also add getCart(cartId) and updateCart(cartId, lines) functions for future use. Handle error cases: variant out of stock, invalid quantity.",
    tags: ["chef-app"],
    urgency: "this-week",
  },
  {
    id: 2000000029,
    title: "Build Place Order flow — write to Firestore + Shopify checkout",
    status: "not-started",
    priority: "high",
    owner: "trey",
    size: "L",
    sprintId: null,
    dueDate: null,
    notes: "When chef taps 'Place Order': (1) Validate cart is not empty and delivery date is selected. (2) Write order to Firestore at farms/{farmId}/orders/{auto-id} with fields: customerId (user.uid), items array, status 'new', requestedDeliveryDate, specialInstructions, total, createdAt timestamp. (3) Call shopifyService.createCheckout() to create Shopify checkout. (4) For chefs with credit cards on file, redirect to Shopify checkout URL. For invoice-only chefs, skip Shopify checkout — order just lives in Firestore. (5) Clear cart. (6) Navigate to order confirmation/tracker. Show loading spinner during submission.",
    tags: ["chef-app"],
    urgency: "this-week",
  },
  {
    id: 2000000030,
    title: "Build order confirmation screen",
    status: "not-started",
    priority: "high",
    owner: "trey",
    size: "M",
    sprintId: null,
    dueDate: null,
    notes: "After successful order placement, show confirmation: green checkmark animation, 'Order Placed!' heading, order summary (item count, total, delivery date), 'View Order' button that goes to the order detail/tracker. This provides immediate feedback that the order went through. Auto-redirect to order detail after 3 seconds if no tap. Keep it simple and celebratory.",
    tags: ["chef-app"],
    urgency: "this-month",
  },

  // ============================================================
  // EPIC 23: Chef App — Order Management & History
  // ============================================================

  // ── Feature: Order History ──
  {
    id: 2000000031,
    title: "Build orderService.js — read orders from Firestore",
    status: "not-started",
    priority: "high",
    owner: "trey",
    size: "M",
    sprintId: null,
    dueDate: null,
    notes: "Create src/services/orderService.js. Functions: fetchOrders(farmId, customerId) — queries farms/{farmId}/orders where customerId == user.uid, ordered by createdAt desc, limit 50. fetchOrder(farmId, orderId) — gets single order doc. subscribeToOrder(farmId, orderId, callback) — real-time Firestore listener for live status updates. Use onSnapshot for real-time. Return cleaned order objects with computed fields like itemCount.",
    tags: ["chef-app"],
    urgency: "this-week",
  },
  {
    id: 2000000032,
    title: "Build useOrders hook",
    status: "not-started",
    priority: "high",
    owner: "trey",
    size: "S",
    sprintId: null,
    dueDate: null,
    notes: "Create src/hooks/useOrders.js. Calls orderService.fetchOrders() with current user's UID. Returns { orders, loading, error, refetch }. Also exposes getLastOrder() which returns the most recent order (used for quick reorder on Home screen). Automatically refetches when user navigates to Orders tab.",
    tags: ["chef-app"],
    urgency: "this-week",
  },
  {
    id: 2000000033,
    title: "Build Orders list page",
    status: "not-started",
    priority: "high",
    owner: "trey",
    size: "M",
    sprintId: null,
    dueDate: null,
    notes: "Create src/components/Orders.jsx. Shows list of past orders, newest first. Each order card shows: date (formatted nicely), item count, total, status badge (colored pill — green for delivered, yellow for in-progress, blue for new). Tapping an order navigates to /orders/:id (OrderDetail). Empty state: 'No orders yet — browse the catalog to get started.' Pull-to-refresh gesture if possible. 'Reorder' button on each card that pre-fills cart with that order's items.",
    tags: ["chef-app"],
    urgency: "this-week",
  },

  // ── Feature: Order Tracking ──
  {
    id: 2000000034,
    title: "Build OrderDetail page with live status tracker",
    status: "not-started",
    priority: "high",
    owner: "trey",
    size: "L",
    sprintId: null,
    dueDate: null,
    notes: "Create src/components/OrderDetail.jsx. Uses Firestore real-time listener (subscribeToOrder) for live updates. Top section: order date, delivery date, status badge. Status timeline/progress bar showing: New → Confirmed → Harvesting → Packed → Delivered (or Cancelled). Current step highlighted, completed steps checked. Below timeline: item list with quantities and prices, order total, special instructions if any. 'Reorder' button at bottom. The live status updates are what replace the chef texting Ricardo asking 'where's my order?' — they can see it in real-time as the farm team updates status in the Workspace app.",
    tags: ["chef-app"],
    urgency: "this-week",
  },

  // ── Feature: Quick Reorder ──
  {
    id: 2000000035,
    title: "Build Reorder functionality",
    status: "not-started",
    priority: "high",
    owner: "trey",
    size: "M",
    sprintId: null,
    dueDate: null,
    notes: "Add reorder function to useCart hook: reorder(order) takes a past order, maps its items to cart items, and adds them all to the cart. Checks that each product/variant is still available (via Shopify). If a product is discontinued, skip it and show a toast: '1 item was unavailable and removed.' After reorder, navigate to Cart page so chef can review and adjust. This is the #1 feature — 80% of orders will be reorders.",
    tags: ["chef-app"],
    urgency: "this-week",
  },
  {
    id: 2000000036,
    title: "Build Home page with Quick Reorder button",
    status: "not-started",
    priority: "high",
    owner: "trey",
    size: "L",
    sprintId: null,
    dueDate: null,
    notes: "Create src/components/Home.jsx. This is the chef's landing page after login. Top: personalized greeting with chef/restaurant name and their logo/banner if available (from customer doc). Big prominent 'Reorder Last Order' button (full width, Mico's green, 56px height) — tapping this calls reorder() with the most recent order. Below: section showing active orders with status (using mini status badges). If no active orders, show next delivery date. Below that: 'Browse Catalog' link. Maximum 3 things visible on the screen at once — simplicity is king. Chef's frequently ordered items could show as quick-add chips below the reorder button.",
    tags: ["chef-app"],
    urgency: "this-week",
  },

  // ============================================================
  // EPIC 24: Chef App — Delivery & Fulfillment
  // ============================================================

  // ── Feature: Real-time Status Updates ──
  {
    id: 2000000037,
    title: "Build order status update listener for active orders",
    status: "not-started",
    priority: "high",
    owner: "trey",
    size: "M",
    sprintId: null,
    dueDate: null,
    notes: "On the Home page, subscribe to real-time Firestore updates for any orders with status !== 'delivered' and status !== 'cancelled' for the current chef. When the farm team updates an order status in the Workspace app (e.g. from 'confirmed' to 'harvesting'), the chef sees it update live on their Home screen without refreshing. Use onSnapshot query with where clauses. Unsubscribe on component unmount.",
    tags: ["chef-app"],
    urgency: "this-month",
  },
  {
    id: 2000000038,
    title: "Add estimated delivery countdown to OrderDetail",
    status: "not-started",
    priority: "medium",
    owner: "trey",
    size: "M",
    sprintId: null,
    dueDate: null,
    notes: "On the OrderDetail page, show a countdown or timeline showing: when the order was placed, when it was confirmed, estimated harvest time, estimated delivery. Use requestedDeliveryDate and status timestamps to calculate. Show 'Delivering in X hours' or 'Delivering tomorrow' style messaging. This gives chefs confidence about when their product arrives. Pull timing data from order status change timestamps stored in the order doc.",
    tags: ["chef-app"],
    urgency: "this-month",
  },

  // ── Feature: Notifications ──
  {
    id: 2000000039,
    title: "Build push notification setup for order status changes",
    status: "not-started",
    priority: "medium",
    owner: "trey",
    size: "L",
    sprintId: null,
    dueDate: null,
    notes: "Set up Firebase Cloud Messaging (FCM) for web push notifications. When order status changes, send push to the chef: 'Your order has been confirmed', 'Your order is being harvested', 'Your order is packed and ready for delivery', 'Your order has been delivered'. Requires: FCM setup in Firebase console, notification permission request in the app, storing the FCM token in the customer doc, Cloud Function triggered on order status change that sends the push. This is a larger task — can be Phase 4.",
    tags: ["chef-app"],
    urgency: "future",
  },
  {
    id: 2000000040,
    title: "Build order reminder system (replaces Ricardo's texts)",
    status: "not-started",
    priority: "medium",
    owner: "trey",
    size: "L",
    sprintId: null,
    dueDate: null,
    notes: "This replaces Ricardo texting chefs twice a week to remind them to order. Cloud Function runs on a schedule (e.g. Monday and Thursday mornings). For each chef who hasn't placed an order for the next delivery day, send a push notification: 'Time to order! Place your order for [delivery date] delivery.' Could also be an email or SMS via a service like Twilio. Config: reminder schedule and cutoff times stored in farms/{farmId}/config. This is a major workflow improvement — eliminates manual reminder texts.",
    tags: ["chef-app"],
    urgency: "future",
  },

  // ============================================================
  // EPIC 25: Chef App — Account & Preferences
  // ============================================================

  // ── Feature: Profile Display ──
  {
    id: 2000000041,
    title: "Build Account page — profile display",
    status: "not-started",
    priority: "medium",
    owner: "trey",
    size: "M",
    sprintId: null,
    dueDate: null,
    notes: "Create src/components/Account.jsx. Read customer profile from Firestore farms/{farmId}/customers/{uid}. Display: restaurant name, chef name, email, phone, delivery address. All fields read-only (admin manages in Workspace app). Show restaurant logo/banner at top if available. Logout button at bottom (full width, red outline style). Dark theme consistent with rest of app.",
    tags: ["chef-app"],
    urgency: "this-month",
  },
  {
    id: 2000000042,
    title: "Build useCustomer hook",
    status: "not-started",
    priority: "medium",
    owner: "trey",
    size: "S",
    sprintId: null,
    dueDate: null,
    notes: "Create src/hooks/useCustomer.js. Fetches customer doc from Firestore farms/{farmId}/customers/{user.uid} on auth state change. Returns { customer, loading, error, updatePreferences }. Customer object includes: name, restaurantName, email, phone, address, deliveryDays, substitutionPrefs, logoUrl, bannerUrl. Used by Home page for personalization and Account page for display.",
    tags: ["chef-app"],
    urgency: "this-month",
  },

  // ── Feature: Preferences Management ──
  {
    id: 2000000043,
    title: "Build substitution preferences UI",
    status: "not-started",
    priority: "low",
    owner: "trey",
    size: "M",
    sprintId: null,
    dueDate: null,
    notes: "On Account page, add a 'Substitution Preferences' section. For each product the chef regularly orders, they can set: 'If unavailable: substitute with [dropdown] / no substitution / contact me'. Saves to farms/{farmId}/customers/{uid}.substitutionPrefs as an object keyed by productId. This helps the farm team make decisions when a crop is short — they know each chef's preference without calling them. Editable by chef, read by farm team in Workspace app.",
    tags: ["chef-app"],
    urgency: "future",
  },
  {
    id: 2000000044,
    title: "Build notification preferences UI",
    status: "not-started",
    priority: "low",
    owner: "trey",
    size: "S",
    sprintId: null,
    dueDate: null,
    notes: "On Account page, add 'Notification Preferences' section. Toggle switches for: Order status updates (on/off), Order reminders (on/off), New products available (on/off). Saves to customer doc. Default all to ON. Simple toggle list with descriptive labels. These control which push notifications the chef receives.",
    tags: ["chef-app"],
    urgency: "future",
  },

  // ============================================================
  // EPIC 26: Chef App — Admin Integration
  // ============================================================

  // ── Feature: Shopify Sync ──
  {
    id: 2000000045,
    title: "Build Shopify order sync webhook — Cloud Function",
    status: "not-started",
    priority: "high",
    owner: "trey",
    size: "L",
    sprintId: null,
    dueDate: null,
    notes: "Create a Firebase Cloud Function (or Vercel serverless function) that receives Shopify order webhooks. When an order is completed through Shopify checkout, the webhook fires and the function: (1) Verifies the webhook signature for security. (2) Parses the Shopify order data. (3) Finds the matching Firestore order (by matching items/customer/timestamp) or creates a new one. (4) Updates the Firestore order with Shopify order ID, payment status, and any Shopify-specific data. This is the bridge that keeps Shopify and Firestore in sync. Halie sees the order in Shopify admin, farm team sees it in Workspace app.",
    tags: ["chef-app"],
    urgency: "this-month",
  },
  {
    id: 2000000046,
    title: "Build Firestore-to-Shopify order push for invoice customers",
    status: "not-started",
    priority: "high",
    owner: "trey",
    size: "L",
    sprintId: null,
    dueDate: null,
    notes: "For chefs who pay by invoice (not credit card), orders skip Shopify checkout and go directly to Firestore. We need a Cloud Function that: on Firestore order create, if the customer's payment method is 'invoice', creates a draft order in Shopify via the Admin API so Halie can still see it and manage invoicing from Shopify admin. Uses Shopify Admin API draftOrderCreate mutation. Maps Firestore order items to Shopify line items. This ensures ALL orders end up in Shopify regardless of payment method.",
    tags: ["chef-app"],
    urgency: "this-month",
  },

  // ── Feature: Security & Permissions ──
  {
    id: 2000000047,
    title: "Set up Firestore security rules for chef app",
    status: "not-started",
    priority: "high",
    owner: "trey",
    size: "M",
    sprintId: null,
    dueDate: null,
    notes: "Update Firestore security rules to support chef app access. Rules: Chef users can READ products (farms/{farmId}/products/*). Chef users can READ and WRITE their own orders (farms/{farmId}/orders/* where customerId == request.auth.uid). Chef users can READ and WRITE their own customer doc (farms/{farmId}/customers/{uid} where uid == request.auth.uid). Chef users CANNOT read other chefs' orders or customer docs. Admin users can read/write everything. Test rules thoroughly — security is critical since multiple chefs share the same database.",
    tags: ["chef-app"],
    urgency: "this-month",
  },

  // ── Feature: Admin Tools (Workspace App) ──
  {
    id: 2000000048,
    title: "Build admin chef account creation flow in Workspace app",
    status: "not-started",
    priority: "high",
    owner: "trey",
    size: "L",
    sprintId: null,
    dueDate: null,
    notes: "In the main Mico's Workspace app, build a CustomerManager component where admin can: create a new chef account (creates Firebase Auth user + Firestore customer doc), set restaurant name, contact info, delivery address, payment method (credit card vs invoice), upload restaurant logo/banner, toggle account active/inactive. When account is created, chef receives email to set their password. This is how chefs get onboarded — they never create their own accounts. Lives in the Workspace app, not the chef app.",
    tags: ["chef-app"],
    urgency: "this-month",
  },
  {
    id: 2000000049,
    title: "Build OrderManager component in Workspace app",
    status: "not-started",
    priority: "high",
    owner: "trey",
    size: "L",
    sprintId: null,
    dueDate: null,
    notes: "In the Workspace app, build OrderManager component where farm team can: see all incoming orders in real-time (Firestore listener), filter by status/date/customer, tap an order to see detail, update order status (new → confirmed → harvesting → packed → delivered or cancelled). Status changes here are what the chef sees updating live in their app. Include bulk status update for efficiency (e.g. mark all confirmed orders as 'harvesting'). Sort by delivery date. Show order totals and item counts.",
    tags: ["chef-app"],
    urgency: "this-month",
  },

  // ── Feature: Operations Automation ──
  {
    id: 2000000050,
    title: "Build HarvestQueue auto-generation from confirmed orders",
    status: "not-started",
    priority: "high",
    owner: "trey",
    size: "L",
    sprintId: null,
    dueDate: null,
    notes: "In the Workspace app, build HarvestQueue component that auto-generates a harvest list from all confirmed orders for a given delivery date. Aggregates: for each product, total quantity needed across all orders. Shows: product name, total qty needed, list of which chefs ordered how much. Farm team uses this to know exactly what to harvest. Updates in real-time as new orders come in or orders are modified. Can be printed or viewed on phone in the greenhouse. This replaces manually building harvest lists from text message orders.",
    tags: ["chef-app"],
    urgency: "this-month",
  },
  {
    id: 2000000051,
    title: "Build PackingList per-customer checklist",
    status: "not-started",
    priority: "medium",
    owner: "trey",
    size: "M",
    sprintId: null,
    dueDate: null,
    notes: "In the Workspace app, build PackingList component. For each delivery date, generates a per-customer packing checklist. Shows: customer name, list of items and quantities, checkboxes to mark each item packed. When all items checked, order status auto-updates to 'packed'. Can group by delivery route if applicable. Printable format for the packing station. This ensures nothing gets missed during packing.",
    tags: ["chef-app"],
    urgency: "this-month",
  },

  // ============================================================
  // EPIC 27: Chef App — Polish & Launch
  // ============================================================

  // ── Feature: UI Polish ──
  {
    id: 2000000052,
    title: "Build dark/light mode toggle",
    status: "not-started",
    priority: "low",
    owner: "trey",
    size: "S",
    sprintId: null,
    dueDate: null,
    notes: "Add a dark/light mode toggle to the Account page. Default is dark mode (kitchen-friendly). Use Tailwind's dark: variant classes throughout the app. Store preference in localStorage. Apply class 'dark' to document root. Light mode: white backgrounds, dark text, same green accents. Most chefs will stay on dark mode but some kitchens are bright and light mode is easier to read.",
    tags: ["chef-app"],
    urgency: "future",
  },
  {
    id: 2000000053,
    title: "Add loading states to all pages",
    status: "not-started",
    priority: "medium",
    owner: "trey",
    size: "M",
    sprintId: null,
    dueDate: null,
    notes: "Every page that fetches data needs a loading state. Use skeleton screens (gray pulsing rectangles matching the layout) rather than spinners — feels faster. Catalog: skeleton product cards in 2-column grid. Orders: skeleton order cards. Home: skeleton reorder button and order cards. Cart: no loading needed (localStorage is instant). OrderDetail: skeleton timeline and item list. Keep skeletons consistent with the dark theme.",
    tags: ["chef-app"],
    urgency: "this-month",
  },
  {
    id: 2000000054,
    title: "Add empty states to all pages",
    status: "not-started",
    priority: "medium",
    owner: "trey",
    size: "S",
    sprintId: null,
    dueDate: null,
    notes: "Every page needs a friendly empty state. Orders: 'No orders yet — browse the catalog to place your first order.' Cart: 'Your cart is empty' with link to catalog. Catalog with no results: 'No products available right now. Check back soon!' Home with no recent orders: 'Welcome! Browse the catalog to place your first order.' Use simple illustrations or icons. Keep messaging warm and actionable.",
    tags: ["chef-app"],
    urgency: "this-month",
  },
  {
    id: 2000000055,
    title: "Add error handling and toast notifications",
    status: "not-started",
    priority: "medium",
    owner: "trey",
    size: "M",
    sprintId: null,
    dueDate: null,
    notes: "Build a simple toast notification system. Shows brief messages at the top or bottom of the screen that auto-dismiss after 3 seconds. Types: success (green), error (red), info (blue). Use for: 'Item added to cart', 'Order placed successfully', 'Failed to load products — tap to retry', 'You're offline — orders will be queued'. Wrap all API calls in try/catch with user-friendly error messages. Never show raw error messages to chefs.",
    tags: ["chef-app"],
    urgency: "this-month",
  },
  {
    id: 2000000059,
    title: "Build formatters utility — price, date, status",
    status: "not-started",
    priority: "medium",
    owner: "trey",
    size: "S",
    sprintId: null,
    dueDate: null,
    notes: "Create src/utils/formatters.js with helper functions: formatPrice(amount) — returns '$12.50' style string. formatDate(timestamp) — returns 'Tue, Feb 18' style for order dates. formatDateTime(timestamp) — returns 'Feb 18 at 3:45 PM' for detailed views. formatStatus(status) — returns human-readable status with proper capitalization. getStatusColor(status) — returns Tailwind color class for status badges. getNextDeliveryDates(deliveryDays, cutoffTime, count) — calculates next N available delivery dates.",
    tags: ["chef-app"],
    urgency: "this-week",
  },

  // ── Feature: Reliability ──
  {
    id: 2000000056,
    title: "Add offline awareness banner",
    status: "not-started",
    priority: "medium",
    owner: "trey",
    size: "S",
    sprintId: null,
    dueDate: null,
    notes: "Detect when the device is offline (navigator.onLine + online/offline events). Show a persistent banner at the top: 'You're offline. Some features may not work.' When back online, show brief 'Back online' toast and auto-refresh data. Cart still works offline (localStorage). Orders page shows cached data. Critical for chefs in walk-in coolers or basements where signal drops.",
    tags: ["chef-app"],
    urgency: "this-month",
  },

  // ── Feature: Mobile Optimization ──
  {
    id: 2000000057,
    title: "Mobile optimization pass — touch targets and spacing",
    status: "not-started",
    priority: "high",
    owner: "trey",
    size: "M",
    sprintId: null,
    dueDate: null,
    notes: "Final pass through every screen on a real phone (375px width). Verify: all interactive elements are at least 44x44px (prefer 48x48px). No text smaller than 14px. No inputs smaller than 16px (prevents iOS auto-zoom). Adequate spacing between tappable elements (min 8px gap). Bottom tab bar doesn't overlap content. Content scrolls freely. No horizontal overflow. Test on both iOS Safari and Android Chrome. Fix any issues found. This is critical — the app is useless if chefs can't tap things accurately.",
    tags: ["chef-app"],
    urgency: "this-month",
  },
  {
    id: 2000000058,
    title: "Test biometric/Face ID login on iOS and Android",
    status: "not-started",
    priority: "medium",
    owner: "trey",
    size: "S",
    sprintId: null,
    dueDate: null,
    notes: "When the PWA is installed to home screen: iOS supports Face ID / Touch ID for saved passwords in Safari's password manager. Android supports fingerprint for saved credentials. Test that 'Remember me' + saved password = one-tap biometric login on both platforms. If not working natively, explore WebAuthn API for passkey support as a future enhancement. The goal: chef opens app, taps face/finger, they're in.",
    tags: ["chef-app"],
    urgency: "this-month",
  },

  // ── Feature: Testing & Launch Prep ──
  {
    id: 2000000060,
    title: "Create seed data — test products in Shopify",
    status: "not-started",
    priority: "high",
    owner: "trey",
    size: "M",
    sprintId: null,
    dueDate: null,
    notes: "In Shopify admin, ensure products are set up correctly for the chef app. Each microgreen product needs: title, product type (Microgreens/Leafy Greens/Herbs), variants for each size (4oz clamshell, 8oz clamshell), price per variant, product image, availability toggled on. Create at least 8-10 products spanning all three categories for testing. Ensure the Mico's Chef App has Storefront API access to these products (check Sales Channels in Shopify).",
    tags: ["chef-app"],
    urgency: "this-week",
  },
  {
    id: 2000000061,
    title: "Create seed data — test customer doc in Firestore",
    status: "not-started",
    priority: "high",
    owner: "trey",
    size: "S",
    sprintId: null,
    dueDate: null,
    notes: "Create a test chef account in Firebase Auth (email/password). Then create matching customer doc in Firestore at farms/{farmId}/customers/{uid} with: name, restaurantName, email, phone, address, deliveryDays, paymentMethod. Also create farms/{farmId}/config doc with: cutoffTime, deliveryDays ['Tuesday', 'Friday'], timezone 'America/Boise'. This test data lets you develop and test the full flow end-to-end.",
    tags: ["chef-app"],
    urgency: "this-week",
  },
  {
    id: 2000000062,
    title: "End-to-end test — full order flow",
    status: "not-started",
    priority: "high",
    owner: "trey",
    size: "M",
    sprintId: null,
    dueDate: null,
    notes: "Complete test of the full flow on a real phone: (1) Open micos.shop on phone. (2) Log in as test chef. (3) See personalized home screen. (4) Browse catalog, add items to cart. (5) Review cart, select delivery date. (6) Place order. (7) Verify order appears in Firestore. (8) In Workspace app, update order status. (9) Verify chef app shows live status update. (10) Test reorder flow. Document any bugs found. Test on both iOS and Android.",
    tags: ["chef-app"],
    urgency: "this-month",
  },

  // ── Feature: Rollout ──
  {
    id: 2000000063,
    title: "Onboard first pilot chef",
    status: "not-started",
    priority: "high",
    owner: "trey",
    size: "M",
    sprintId: null,
    dueDate: null,
    notes: "Pick one trusted chef (someone patient and tech-friendly) to be the first real user. Create their account, walk them through installing the PWA on their phone, place a test order together. Get feedback on: Was anything confusing? Could you do it with one hand? Was it faster than texting Ricardo? Iterate based on their feedback before rolling out to all chefs. This is your beta test.",
    tags: ["chef-app"],
    urgency: "this-month",
  },
  {
    id: 2000000064,
    title: "Roll out to all chef customers",
    status: "not-started",
    priority: "high",
    owner: "trey",
    size: "L",
    sprintId: null,
    dueDate: null,
    notes: "After pilot feedback is incorporated: create accounts for all chef customers, send onboarding email with instructions (link to micos.shop, how to install as PWA, how to place first order), be available for support in the first week. Ricardo stops texting for orders — instead sends a one-time message: 'Hey, we've got a new ordering app! Here's your login...' Monitor for issues. Celebrate — you've eliminated the manual texting workflow.",
    tags: ["chef-app"],
    urgency: "this-month",
  },
];
